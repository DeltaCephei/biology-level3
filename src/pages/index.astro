---
/* ==========================================================================
   index.astro — Landing Page
   Level 3 NCEA Biology Course Platform

   Sections:
   1. Hero — dynamic text cycler with rotating NCEA standards
   2. This Week — bento grid of the current week's content
   3. Course Overview — the five NCEA standards
   4. Browse Weeks — week selector grid
   ========================================================================== */

import BaseLayout from '../layouts/BaseLayout.astro';
import WeekCard from '../components/WeekCard.astro';
import { standards } from '../data/standards';
import { currentWeek } from '../data/currentWeek';

/* Base URL for prefixing internal links */
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

/* Week numbers 1–40 for the browse grid */
const totalWeeks = 40;
/* Weeks with dedicated content pages — add week numbers here as they're built */
const activeWeeks = [3, 4, 5];
---

<BaseLayout title="Level 3 Biology — Course Platform">

  <!-- ====================================================================
       Section 1: Hero — Dynamic Text Cycler
       Headline with rotating NCEA standard names.
       Pure CSS animations + tiny vanilla JS interval.
       ==================================================================== -->
  <section class="hero" aria-label="Hero">
    <div class="hero__content">
      <h1 class="hero__title"><span class="hero__accent">Dr Eliot's</span> Level 3 <span class="hero__highlight">Biology</span></h1>

      <!-- Cycling word container — one standard visible at a time -->
      <div class="hero__cycler" aria-live="polite">
        <div class="hero__cycler-track">
          <span class="hero__cycler-word">Evolution &amp; Speciation</span>
          <span class="hero__cycler-word">Homeostasis</span>
          <span class="hero__cycler-word">Animal &amp; Plant Responses</span>
          <span class="hero__cycler-word">Socio-Scientific Issues</span>
          <span class="hero__cycler-word">Practical Investigation</span>
        </div>
      </div>

      <p class="hero__tagline">Your week-by-week course companion</p>
    </div>
    <div class="hero__scroll-hint" aria-hidden="true">
      <span class="hero__scroll-arrow"></span>
    </div>
  </section>


  <!-- ====================================================================
       Section 2: This Week — Bento Grid
       Apple/iOS-inspired mixed-size cards for the current week's content.
       ==================================================================== -->
  <section class="this-week" aria-labelledby="this-week-heading">
    <div class="container">
      <div class="section-header fade-in-up">
        <h2 id="this-week-heading">This Week</h2>
        <p class="section-subtitle">Week {currentWeek.number} &mdash; {currentWeek.term}</p>
      </div>

      <div class="bento-grid">

        <!-- Child 1: Large topic card (spans 2 cols, 2 rows) -->
        <WeekCard
          title={currentWeek.topicTitle}
          subtitle={currentWeek.topicSubtitle}
          size="large"
          accentColour={currentWeek.accentColour}
        >
          <a href={`${base}/week/${currentWeek.number}`} class="card-cta">
            Start Learning
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <p class="card-description">
            {currentWeek.description}
          </p>
          <div class="card-illustration" aria-hidden="true">
            <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <!-- Honeycomb cells -->
              <path d="M40 30 L50 24 L60 30 L60 42 L50 48 L40 42 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <path d="M60 30 L70 24 L80 30 L80 42 L70 48 L60 42 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <path d="M50 48 L60 42 L70 48 L70 60 L60 66 L50 60 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <path d="M30 48 L40 42 L50 48 L50 60 L40 66 L30 60 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <path d="M70 48 L80 42 L90 48 L90 60 L80 66 L70 60 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <path d="M40 66 L50 60 L60 66 L60 78 L50 84 L40 78 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <path d="M60 66 L70 60 L80 66 L80 78 L70 84 L60 78 Z" fill="none" stroke="rgba(255,193,7,0.3)" stroke-width="0.8"/>
              <!-- Figure-8 waggle dance path -->
              <path d="M60 45 C75 45 78 58 60 65" fill="none" stroke="var(--fluoro-cyan)" stroke-width="1.2" opacity="0.4" stroke-dasharray="3 2"/>
              <path d="M60 45 C45 45 42 58 60 65" fill="none" stroke="var(--fluoro-cyan)" stroke-width="1.2" opacity="0.4" stroke-dasharray="3 2"/>
              <!-- Waggle run -->
              <line x1="60" y1="45" x2="60" y2="65" stroke="var(--fluoro-cyan)" stroke-width="2" opacity="0.7"/>
              <polyline points="57,48 63,52 57,56 63,60 57,64" fill="none" stroke="var(--green-vivid)" stroke-width="1" opacity="0.5"/>
              <!-- Bee -->
              <ellipse cx="60" cy="50" rx="5" ry="8" fill="var(--standard-3-colour)" opacity="0.5"/>
              <ellipse cx="60" cy="50" rx="3" ry="5" fill="var(--standard-3-colour)" opacity="0.3"/>
              <!-- Wings -->
              <ellipse cx="53" cy="49" rx="4" ry="7" fill="rgba(200,230,255,0.15)" transform="rotate(-15 53 49)"/>
              <ellipse cx="67" cy="49" rx="4" ry="7" fill="rgba(200,230,255,0.15)" transform="rotate(15 67 49)"/>
              <!-- Sun -->
              <circle cx="90" cy="20" r="6" fill="none" stroke="var(--fluoro-pink)" stroke-width="1" opacity="0.4"/>
              <line x1="90" y1="10" x2="90" y2="13" stroke="var(--fluoro-pink)" stroke-width="1" opacity="0.3"/>
              <line x1="90" y1="27" x2="90" y2="30" stroke="var(--fluoro-pink)" stroke-width="1" opacity="0.3"/>
              <line x1="80" y1="20" x2="83" y2="20" stroke="var(--fluoro-pink)" stroke-width="1" opacity="0.3"/>
              <line x1="97" y1="20" x2="100" y2="20" stroke="var(--fluoro-pink)" stroke-width="1" opacity="0.3"/>
              <!-- Direction arrow -->
              <line x1="60" y1="85" x2="60" y2="100" stroke="var(--accent)" stroke-width="1" stroke-dasharray="3 2" opacity="0.4"/>
              <text x="60" y="112" font-size="7" fill="var(--accent)" opacity="0.5" font-family="var(--font-mono)" text-anchor="middle">direction</text>
            </svg>
          </div>
          <div class="card-meta">
            <span class="badge badge--standard">{currentWeek.standardCode}</span>
            <span class="badge badge--credits">{currentWeek.credits} credits</span>
            <span class={`badge badge--${currentWeek.type.toLowerCase()}`}>{currentWeek.type}</span>
          </div>
        </WeekCard>

        <!-- Child 2: Week Flashcards (right top) -->
        <WeekCard
          title={`Week ${currentWeek.number} Flashcards`}
          subtitle="Learn and revise the keywords and ideas for this week"
          size="medium"
          accentColour="var(--green-vivid)"
        >
          <div class="card-icon" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <rect x="4" y="8" width="20" height="16" rx="3" stroke="var(--green-vivid)" stroke-width="1.5" fill="none"/>
              <rect x="8" y="4" width="20" height="16" rx="3" stroke="var(--green-muted)" stroke-width="1.5" fill="none" opacity="0.5"/>
            </svg>
          </div>
          <p class="card-stat">Coming soon</p>
          <a href={`${base}/flashcards?week=week${currentWeek.number}`} class="card-cta card-cta--sm">
            Start Review
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </WeekCard>

        <!-- Child 3: Boss Level Flashcards (right bottom) -->
        <WeekCard
          title="Boss Level Flashcards"
          subtitle="Learn and revise everything so far"
          size="medium"
          accentColour="var(--fluoro-cyan)"
        >
          <div class="card-icon" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <rect x="2" y="10" width="18" height="14" rx="3" stroke="var(--fluoro-cyan)" stroke-width="1.5" fill="none"/>
              <rect x="6" y="6" width="18" height="14" rx="3" stroke="var(--fluoro-cyan)" stroke-width="1.5" fill="none" opacity="0.6"/>
              <rect x="10" y="2" width="18" height="14" rx="3" stroke="var(--fluoro-cyan)" stroke-width="1.5" fill="none" opacity="0.3"/>
            </svg>
          </div>
          <p class="card-stat">103 cards</p>
          <a href={`${base}/flashcards`} class="card-cta card-cta--sm">
            Take the Challenge
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </WeekCard>

        <!-- Child 4: Week Quiz -->
        <WeekCard
          title={`Week ${currentWeek.number} Quiz`}
          subtitle="Test your knowledge of this week's content"
          href={`${base}/quiz?week=week${currentWeek.number}`}
          size="small"
          accentColour="var(--fluoro-cyan)"
        >
          <div class="card-icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
              <circle cx="14" cy="14" r="11" stroke="var(--fluoro-cyan)" stroke-width="1.5" fill="none"/>
              <path d="M9 14.5l3 3 7-7" stroke="var(--fluoro-cyan)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </WeekCard>

        <!-- Child 5: Boss Level Quiz -->
        <WeekCard
          title="Boss Level Quiz"
          subtitle="Shuffled questions from all weeks"
          href={`${base}/quiz`}
          size="small"
          accentColour="var(--purple-deep)"
        >
          <div class="card-icon" aria-hidden="true">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
              <path d="M7 10h14M7 14h14M7 18h14" stroke="var(--purple-deep, #7c3aed)" stroke-width="1.5" stroke-linecap="round" opacity="0.5"/>
              <path d="M19 7l3 3-3 3" stroke="var(--purple-deep, #7c3aed)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19 15l3 3-3 3" stroke="var(--purple-deep, #7c3aed)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </WeekCard>

        <!-- Child 6: Dr Eliot AI Marked (coming soon) -->
        <WeekCard
          title="Dr Eliot AI Marked"
          subtitle="Written answers marked by AI"
          size="small"
          accentColour="var(--fluoro-pink)"
        >
          <span class="badge badge--coming-soon">Coming Soon</span>
        </WeekCard>

        <!-- Child 7: Progress Snapshot (full width) -->
        <WeekCard
          title="Progress Snapshot"
          subtitle="Your journey across all five standards"
          size="medium"
        >
          <div class="progress-bars">
            {standards.map((s) => (
              <div class="progress-row">
                <div class="progress-label">
                  <span class="progress-code" style={`color: ${s.colour};`}>AS {s.code}</span>
                  <span class="progress-name">{s.title}</span>
                </div>
                <div class="progress-track">
                  <div class="progress-fill" style={`width: 0%; background: ${s.colour};`}></div>
                </div>
                <span class="progress-pct">0%</span>
              </div>
            ))}
          </div>
        </WeekCard>

      </div>
    </div>
  </section>


  <!-- ====================================================================
       Section 3: Course Overview — The Five Standards
       ==================================================================== -->
  <section class="course-overview" aria-labelledby="overview-heading">
    <div class="container">
      <div class="section-header fade-in-up">
        <h2 id="overview-heading">Course Overview</h2>
        <p class="section-subtitle">Five standards. One year. Everything you need.</p>
      </div>

      <div class="standards-grid">
        {standards.map((s) => (
          <a href={`${base}/standards/${s.code}`} class="standard-card fade-in-up" style={`--std-colour: ${s.colour};`}>
            <div class="standard-card__header">
              <span class="standard-card__code">AS {s.code}</span>
              <div class="standard-card__badges">
                <span class={`badge badge--type badge--${s.type.toLowerCase()}`}>{s.type}</span>
                <span class="badge badge--credits">{s.credits} credits</span>
              </div>
            </div>
            <h3 class="standard-card__title">{s.title}</h3>
            <p class="standard-card__desc">{s.fullTitle}</p>
          </a>
        ))}
      </div>
    </div>
  </section>


  <!-- ====================================================================
       Section 4: Browse Weeks
       ==================================================================== -->
  <section class="browse-weeks" aria-labelledby="browse-heading">
    <div class="container">
      <div class="section-header fade-in-up">
        <h2 id="browse-heading">Browse All Weeks</h2>
        <p class="section-subtitle">Navigate to any week of the course</p>
      </div>

      <div class="weeks-grid fade-in-up">
        {Array.from({ length: totalWeeks }, (_, i) => {
          const weekNum = i + 1;
          const isActive = activeWeeks.includes(weekNum);
          return isActive ? (
            <a href={`${base}/week/${weekNum}`} class="week-chip week-chip--active">
              {weekNum}
            </a>
          ) : (
            <span class="week-chip week-chip--disabled" aria-disabled="true">
              {weekNum}
            </span>
          );
        })}
      </div>
    </div>
  </section>

</BaseLayout>


<style>
  /* ==========================================================================
     Page-level Styles — Landing Page
     ========================================================================== */

  /* --------------------------------------------------------------------------
     Container — centres content with comfortable max-width
     -------------------------------------------------------------------------- */
  .container {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 var(--space-5);
  }

  /* --------------------------------------------------------------------------
     Shared Section Spacing & Headers
     -------------------------------------------------------------------------- */
  section {
    padding: var(--space-8) 0;
  }

  .section-header {
    margin-bottom: var(--space-7);
  }

  .section-header h2 {
    margin-bottom: var(--space-2);
  }

  .section-subtitle {
    font-size: var(--text-lg);
    color: var(--text-muted);
  }

  /* --------------------------------------------------------------------------
     Fade-in-up animation
     Cards and section headers animate in as they enter the viewport.
     Uses CSS @keyframes with an IntersectionObserver applied via <script>.
     -------------------------------------------------------------------------- */
  .fade-in-up {
    opacity: 0;
    transform: translateY(24px);
    transition:
      opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1),
      transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .fade-in-up.is-visible {
    opacity: 1;
    transform: translateY(0);
  }


  /* ==========================================================================
     Section 1: Hero — Dynamic Text Cycler
     ========================================================================== */
  .hero {
    position: relative;
    height: 60vh;
    min-height: 420px;
    max-height: 720px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    padding: 0;
    background: radial-gradient(
      ellipse at 50% 40%,
      rgba(0, 255, 136, 0.06) 0%,
      transparent 60%
    );
  }

  .hero__content {
    text-align: center;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
  }

  .hero__title {
    font-size: clamp(2.5rem, 6vw, 5rem);
    font-family: var(--font-display);
    font-weight: var(--weight-bold);
    line-height: 1.1;
    letter-spacing: -0.02em;
  }

  .hero__accent {
    color: var(--accent, #4ade80);
  }

  .hero__highlight {
    background: linear-gradient(
      135deg,
      var(--green-vivid) 0%,
      var(--fluoro-cyan) 50%,
      var(--purple-light) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* --------------------------------------------------------------------------
     Word Cycler — overflow-hidden container with sliding words
     -------------------------------------------------------------------------- */
  .hero__cycler {
    overflow: hidden;
    height: 1.3em;
    position: relative;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-family: var(--font-display);
    font-weight: var(--weight-semibold);
    line-height: 1.3;
    width: 100%;
    max-width: 600px;
  }

  .hero__cycler-track {
    display: flex;
    flex-direction: column;
    transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .hero__cycler-word {
    height: 1.3em;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: linear-gradient(
      135deg,
      var(--green-vivid) 0%,
      var(--fluoro-cyan) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero__tagline {
    font-size: var(--text-xl);
    color: var(--text-secondary);
    max-width: 480px;
    margin: 0;
  }

  /* Reduced motion: show all words statically, no cycling */
  @media (prefers-reduced-motion: reduce) {
    .hero__cycler {
      height: auto;
      overflow: visible;
    }
    .hero__cycler-track {
      transition: none;
      gap: var(--space-1);
    }
    .hero__cycler-word {
      height: auto;
      font-size: var(--text-lg);
    }
  }

  /* Scroll-down hint arrow */
  .hero__scroll-hint {
    position: absolute;
    bottom: var(--space-6);
    left: 50%;
    transform: translateX(-50%);
  }

  .hero__scroll-arrow {
    display: block;
    width: 24px;
    height: 24px;
    border-right: 2px solid var(--text-muted);
    border-bottom: 2px solid var(--text-muted);
    transform: rotate(45deg);
    animation: scroll-bounce 2s ease-in-out infinite;
  }

  @keyframes scroll-bounce {
    0%, 100% { transform: rotate(45deg) translateY(0); opacity: 0.4; }
    50% { transform: rotate(45deg) translateY(6px); opacity: 1; }
  }


  /* ==========================================================================
     Section 2: This Week — Bento Grid
     ========================================================================== */
  .this-week {
    padding-top: var(--space-7);
  }

  .bento-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-4);
  }

  /* Card spanning rules via :global() so they reach into the child component */
  .bento-grid > :global(:nth-child(1)) {
    /* Large topic card — spans 2 cols, 2 rows */
    grid-column: span 2;
    grid-row: span 2;
  }

  .bento-grid > :global(:nth-child(2)) {
    /* Week flashcards — right top */
    grid-column: 3;
    grid-row: 1;
  }

  .bento-grid > :global(:nth-child(3)) {
    /* Boss level flashcards — right bottom */
    grid-column: 3;
    grid-row: 2;
  }

  .bento-grid > :global(:nth-child(4)),
  .bento-grid > :global(:nth-child(5)),
  .bento-grid > :global(:nth-child(6)) {
    /* Bottom row — quiz / quiz / AI marked */
    grid-column: span 1;
  }

  .bento-grid > :global(:nth-child(7)) {
    /* Progress snapshot — full width */
    grid-column: span 3;
  }

  /* Stagger the fade-in-up animation across bento cards */
  .bento-grid > :global(:nth-child(1)) { transition-delay: 0.05s; }
  .bento-grid > :global(:nth-child(2)) { transition-delay: 0.10s; }
  .bento-grid > :global(:nth-child(3)) { transition-delay: 0.15s; }
  .bento-grid > :global(:nth-child(4)) { transition-delay: 0.20s; }
  .bento-grid > :global(:nth-child(5)) { transition-delay: 0.25s; }
  .bento-grid > :global(:nth-child(6)) { transition-delay: 0.30s; }
  .bento-grid > :global(:nth-child(7)) { transition-delay: 0.35s; }

  /* Responsive: tablet (2 cols) */
  @media (max-width: 900px) {
    .bento-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    .bento-grid > :global(:nth-child(1)) {
      grid-column: span 2;
      grid-row: span 1;
    }
    .bento-grid > :global(:nth-child(2)),
    .bento-grid > :global(:nth-child(3)) {
      grid-column: span 1;
      grid-row: auto;
    }
    .bento-grid > :global(:nth-child(7)) {
      grid-column: span 2;
    }
  }

  /* Responsive: mobile (1 col) */
  @media (max-width: 560px) {
    .bento-grid {
      grid-template-columns: 1fr;
    }
    .bento-grid > :global(:nth-child(1)),
    .bento-grid > :global(:nth-child(7)) {
      grid-column: span 1;
    }
  }


  /* --------------------------------------------------------------------------
     Card Interior Styles (scoped to this page)
     -------------------------------------------------------------------------- */

  /* Description text inside the large topic card */
  .card-description {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    line-height: var(--leading-relaxed);
    max-width: 480px;
  }

  /* Metadata badges row */
  .card-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-top: auto;
  }

  /* CTA link inside cards */
  .card-cta {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-display);
    font-weight: var(--weight-semibold);
    font-size: var(--text-base);
    color: var(--accent);
    text-decoration: none;
    margin-top: var(--space-3);
    transition: gap var(--transition-fast);
  }

  .card-cta:hover {
    gap: var(--space-3);
  }

  .card-cta--sm {
    font-size: var(--text-sm);
  }

  /* Icon area placeholder in medium cards */
  .card-icon {
    margin-bottom: var(--space-2);
  }

  /* Stat text — "12 cards this week" etc. */
  .card-stat {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    font-weight: var(--weight-medium);
  }

  /* SVG illustration inside the large topic card */
  .card-illustration {
    margin-top: var(--space-2);
    opacity: 0.85;
  }

  /* --------------------------------------------------------------------------
     Badges — used throughout
     -------------------------------------------------------------------------- */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: var(--space-1) var(--space-3);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    font-family: var(--font-display);
    border-radius: var(--radius-full);
    line-height: 1;
    white-space: nowrap;
  }

  .badge--standard {
    background: var(--accent-muted);
    color: var(--accent);
  }

  .badge--credits {
    background: rgba(148, 163, 184, 0.1);
    color: var(--text-secondary);
  }

  .badge--external {
    background: rgba(255, 110, 199, 0.12);
    color: var(--fluoro-pink);
  }

  .badge--type {
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .badge--internal {
    background: rgba(0, 255, 136, 0.1);
    color: var(--green-vivid);
  }

  .badge--external {
    background: rgba(255, 110, 199, 0.1);
    color: var(--fluoro-pink);
  }

  .badge--coming-soon {
    background: rgba(255, 110, 199, 0.12);
    color: var(--fluoro-pink);
    font-size: var(--text-xs);
  }


  /* --------------------------------------------------------------------------
     Progress Bars (inside the Progress Snapshot card)
     -------------------------------------------------------------------------- */
  .progress-bars {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .progress-row {
    display: grid;
    grid-template-columns: 180px 1fr 40px;
    align-items: center;
    gap: var(--space-3);
  }

  @media (max-width: 600px) {
    .progress-row {
      grid-template-columns: 1fr;
      gap: var(--space-1);
    }
  }

  .progress-label {
    display: flex;
    gap: var(--space-2);
    font-size: var(--text-xs);
  }

  .progress-code {
    font-family: var(--font-mono);
    font-weight: var(--weight-semibold);
    white-space: nowrap;
  }

  .progress-name {
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .progress-track {
    height: 6px;
    background: var(--surface-3);
    border-radius: var(--radius-full);
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width 0.8s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .progress-pct {
    font-size: var(--text-xs);
    color: var(--text-muted);
    font-family: var(--font-mono);
    text-align: right;
  }


  /* ==========================================================================
     Section 3: Course Overview — Standards Grid
     ========================================================================== */
  .course-overview {
    background: var(--surface-0);
  }

  .standards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-4);
  }

  .standard-card {
    background: var(--surface-1);
    border: 1px solid var(--border-subtle);
    border-left: 4px solid var(--std-colour);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    text-decoration: none;
    color: inherit;
    transition:
      transform var(--transition-base),
      box-shadow var(--transition-base),
      border-color var(--transition-base);
  }

  .standard-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--std-colour);
  }

  /* Stagger standard card fade-in */
  .standards-grid .standard-card:nth-child(1) { transition-delay: 0.05s; }
  .standards-grid .standard-card:nth-child(2) { transition-delay: 0.10s; }
  .standards-grid .standard-card:nth-child(3) { transition-delay: 0.15s; }
  .standards-grid .standard-card:nth-child(4) { transition-delay: 0.20s; }
  .standards-grid .standard-card:nth-child(5) { transition-delay: 0.25s; }

  .standard-card__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-2);
    flex-wrap: wrap;
  }

  .standard-card__code {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    color: var(--std-colour);
  }

  .standard-card__badges {
    display: flex;
    gap: var(--space-2);
  }

  .standard-card__title {
    font-size: var(--text-xl);
    font-weight: var(--weight-bold);
    color: var(--text-primary);
  }

  .standard-card__desc {
    font-size: var(--text-sm);
    color: var(--text-muted);
    line-height: var(--leading-relaxed);
  }


  /* ==========================================================================
     Section 4: Browse Weeks
     ========================================================================== */
  .browse-weeks {
    background: var(--surface-0);
  }

  .weeks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(52px, 1fr));
    gap: var(--space-2);
    max-width: 720px;
  }

  .week-chip {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 52px;
    font-family: var(--font-display);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-subtle);
    transition:
      transform var(--transition-fast),
      background var(--transition-fast),
      border-color var(--transition-fast),
      box-shadow var(--transition-fast);
    text-decoration: none;
  }

  /* Active (content available) */
  .week-chip--active {
    background: var(--accent-muted);
    color: var(--accent);
    border-color: var(--accent);
  }

  .week-chip--active:hover {
    background: var(--accent);
    color: var(--surface-0);
    transform: translateY(-2px);
    box-shadow: var(--shadow-glow);
  }

  /* Disabled (no content yet) */
  .week-chip--disabled {
    background: var(--surface-1);
    color: var(--text-muted);
    cursor: default;
    opacity: 0.45;
  }
</style>


<!-- ==========================================================================
     Scripts — word cycler + IntersectionObserver fade-in
     ========================================================================== -->
<script>
  /* --------------------------------------------------------------------------
     Word Cycler — rotates through NCEA standard names in the hero
     Pauses for users who prefer reduced motion.
     -------------------------------------------------------------------------- */
  const track = document.querySelector('.hero__cycler-track');
  const words = document.querySelectorAll('.hero__cycler-word');
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  if (track && words.length > 0 && !prefersReducedMotion) {
    let currentIndex = 0;
    const totalWords = words.length;
    const intervalMs = 3000; // 3 seconds per word

    setInterval(() => {
      currentIndex = (currentIndex + 1) % totalWords;
      /* Slide the track up by one word height (each word is 1.3em) */
      track.style.transform = `translateY(-${currentIndex * 1.3}em)`;
    }, intervalMs);
  }

  /* --------------------------------------------------------------------------
     IntersectionObserver — triggers .fade-in-up animations on viewport entry
     -------------------------------------------------------------------------- */
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target); // animate once only
        }
      });
    },
    { threshold: 0.08, rootMargin: '0px 0px -40px 0px' }
  );

  document.querySelectorAll('.fade-in-up').forEach((el) => observer.observe(el));
</script>
