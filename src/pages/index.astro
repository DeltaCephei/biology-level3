---
/* ==========================================================================
   index.astro — Landing Page
   Level 3 NCEA Biology Course Platform

   Sections:
   1. Hero — dynamic text cycler with rotating NCEA standards
   2. This Week — bento grid of the current week's content
   3. Course Overview — the five NCEA standards
   4. Browse Weeks — week selector grid
   ========================================================================== */

import BaseLayout from '../layouts/BaseLayout.astro';
import WeekCard from '../components/WeekCard.astro';

/* --------------------------------------------------------------------------
   NCEA Level 3 Biology Standards
   Each standard gets a distinct accent colour from the design tokens.
   -------------------------------------------------------------------------- */
const standards = [
  {
    code: 'AS 91601',
    title: 'Practical Investigation',
    fullTitle: 'Carry out a practical investigation in a biological context, with guidance',
    credits: 4,
    type: 'Internal',
    colour: 'var(--standard-1-colour)',
  },
  {
    code: 'AS 91602',
    title: 'Socio-Scientific Issue',
    fullTitle: 'Integrate biological knowledge to develop an informed response to a socio-scientific issue',
    credits: 3,
    type: 'Internal',
    colour: 'var(--standard-2-colour)',
  },
  {
    code: 'AS 91603',
    title: 'Animal & Plant Responses',
    fullTitle: 'Demonstrate understanding of the responses of plants and animals to their external environment',
    credits: 5,
    type: 'External',
    colour: 'var(--standard-3-colour)',
  },
  {
    code: 'AS 91604',
    title: 'Homeostasis',
    fullTitle: 'Demonstrate understanding of how an animal maintains a stable internal environment',
    credits: 3,
    type: 'External',
    colour: 'var(--standard-4-colour)',
  },
  {
    code: 'AS 91605',
    title: 'Evolution & Speciation',
    fullTitle: 'Demonstrate understanding of evolutionary processes leading to speciation',
    credits: 4,
    type: 'External',
    colour: 'var(--standard-5-colour)',
  },
];

/* Base URL for prefixing internal links */
const base = import.meta.env.BASE_URL;

/* Week numbers 1–40 for the browse grid */
const totalWeeks = 40;
const activeWeek = 3;
---

<BaseLayout title="Level 3 Biology — Course Platform">

  <!-- ====================================================================
       Section 1: Hero — Dynamic Text Cycler
       Headline with rotating NCEA standard names.
       Pure CSS animations + tiny vanilla JS interval.
       ==================================================================== -->
  <section class="hero" aria-label="Hero">
    <div class="hero__content">
      <h1 class="hero__title"><span class="hero__accent">Dr Eliot's</span> Level 3 <span class="hero__highlight">Biology</span></h1>

      <!-- Cycling word container — one standard visible at a time -->
      <div class="hero__cycler" aria-live="polite">
        <div class="hero__cycler-track">
          <span class="hero__cycler-word">Evolution &amp; Speciation</span>
          <span class="hero__cycler-word">Homeostasis</span>
          <span class="hero__cycler-word">Animal &amp; Plant Responses</span>
          <span class="hero__cycler-word">Socio-Scientific Issues</span>
          <span class="hero__cycler-word">Practical Investigation</span>
        </div>
      </div>

      <p class="hero__tagline">Your week-by-week course companion</p>
    </div>
    <div class="hero__scroll-hint" aria-hidden="true">
      <span class="hero__scroll-arrow"></span>
    </div>
  </section>


  <!-- ====================================================================
       Section 2: This Week — Bento Grid
       Apple/iOS-inspired mixed-size cards for the current week's content.
       ==================================================================== -->
  <section class="this-week" aria-labelledby="this-week-heading">
    <div class="container">
      <div class="section-header fade-in-up">
        <h2 id="this-week-heading">This Week</h2>
        <p class="section-subtitle">Week 3 &mdash; Term 1</p>
      </div>

      <div class="bento-grid">

        <!-- Large card: Current topic (spans 2 columns) -->
        <WeekCard
          title="Simple Animal Responses"
          subtitle="AS 91603 — Taxis and Kinesis"
          href={`${base}/week/3`}
          size="large"
          accentColour="var(--standard-3-colour)"
        >
          <p class="card-description">
            Learn the difference between taxis and kinesis, the eight stimuli and their
            prefixes, and explore real NZ examples from glow-worms to longfin eels.
          </p>
          <div class="card-meta">
            <span class="badge badge--standard">AS 91603</span>
            <span class="badge badge--credits">5 credits</span>
            <span class="badge badge--external">External</span>
          </div>
          <a href={`${base}/week/3`} class="card-cta">
            Start Learning
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </WeekCard>

        <!-- Medium card: Flashcards -->
        <WeekCard
          title="Flashcards"
          href={`${base}/flashcards`}
          size="medium"
          accentColour="var(--green-vivid)"
        >
          <div class="card-icon" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <rect x="4" y="8" width="20" height="16" rx="3" stroke="var(--green-vivid)" stroke-width="1.5" fill="none"/>
              <rect x="8" y="4" width="20" height="16" rx="3" stroke="var(--green-muted)" stroke-width="1.5" fill="none" opacity="0.5"/>
            </svg>
          </div>
          <p class="card-stat">12 cards this week</p>
          <a href={`${base}/flashcards`} class="card-cta card-cta--sm">
            Start Review
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </WeekCard>

        <!-- Medium card: Quiz -->
        <WeekCard
          title="Quiz"
          href={`${base}/quiz`}
          size="medium"
          accentColour="var(--fluoro-cyan)"
        >
          <div class="card-icon" aria-hidden="true">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <circle cx="16" cy="16" r="11" stroke="var(--fluoro-cyan)" stroke-width="1.5" fill="none"/>
              <path d="M13 16.5l2.5 2.5L20 13" stroke="var(--fluoro-cyan)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <p class="card-stat">8 questions available</p>
          <a href={`${base}/quiz`} class="card-cta card-cta--sm">
            Take Quiz
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none" aria-hidden="true">
              <path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </WeekCard>

        <!-- Small card: Study streak -->
        <WeekCard
          title="Study Streak"
          size="small"
        >
          <p class="streak-number">0 <span class="streak-unit">day streak</span></p>
          <p class="card-hint">Keep it going!</p>
        </WeekCard>

        <!-- Small card: Teams reference -->
        <WeekCard
          title="Teams Assignment"
          size="small"
          accentColour="var(--purple-rich)"
        >
          <p class="teams-ref">Week 3: Taxis and kinesis &mdash; see class for details</p>
        </WeekCard>

        <!-- Medium card (full width): Progress snapshot -->
        <WeekCard
          title="Progress Snapshot"
          subtitle="Your journey across all five standards"
          size="medium"
        >
          <div class="progress-bars">
            {standards.map((s) => (
              <div class="progress-row">
                <div class="progress-label">
                  <span class="progress-code" style={`color: ${s.colour};`}>{s.code}</span>
                  <span class="progress-name">{s.title}</span>
                </div>
                <div class="progress-track">
                  <div class="progress-fill" style={`width: 0%; background: ${s.colour};`}></div>
                </div>
                <span class="progress-pct">0%</span>
              </div>
            ))}
          </div>
        </WeekCard>

      </div>
    </div>
  </section>


  <!-- ====================================================================
       Section 3: Course Overview — The Five Standards
       ==================================================================== -->
  <section class="course-overview" aria-labelledby="overview-heading">
    <div class="container">
      <div class="section-header fade-in-up">
        <h2 id="overview-heading">Course Overview</h2>
        <p class="section-subtitle">Five standards. One year. Everything you need.</p>
      </div>

      <div class="standards-grid">
        {standards.map((s) => (
          <a href={`${base}/standards/${s.code.replace('AS ', '')}`} class="standard-card fade-in-up" style={`--std-colour: ${s.colour};`}>
            <div class="standard-card__header">
              <span class="standard-card__code">{s.code}</span>
              <div class="standard-card__badges">
                <span class={`badge badge--type badge--${s.type.toLowerCase()}`}>{s.type}</span>
                <span class="badge badge--credits">{s.credits} credits</span>
              </div>
            </div>
            <h3 class="standard-card__title">{s.title}</h3>
            <p class="standard-card__desc">{s.fullTitle}</p>
          </a>
        ))}
      </div>
    </div>
  </section>


  <!-- ====================================================================
       Section 4: Browse Weeks
       ==================================================================== -->
  <section class="browse-weeks" aria-labelledby="browse-heading">
    <div class="container">
      <div class="section-header fade-in-up">
        <h2 id="browse-heading">Browse All Weeks</h2>
        <p class="section-subtitle">Navigate to any week of the course</p>
      </div>

      <div class="weeks-grid fade-in-up">
        {Array.from({ length: totalWeeks }, (_, i) => {
          const weekNum = i + 1;
          const isActive = weekNum === activeWeek;
          return isActive ? (
            <a href={`${base}/week/${weekNum}`} class="week-chip week-chip--active">
              {weekNum}
            </a>
          ) : (
            <span class="week-chip week-chip--disabled" aria-disabled="true">
              {weekNum}
            </span>
          );
        })}
      </div>
    </div>
  </section>

</BaseLayout>


<style>
  /* ==========================================================================
     Page-level Styles — Landing Page
     ========================================================================== */

  /* --------------------------------------------------------------------------
     Container — centres content with comfortable max-width
     -------------------------------------------------------------------------- */
  .container {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 var(--space-5);
  }

  /* --------------------------------------------------------------------------
     Shared Section Spacing & Headers
     -------------------------------------------------------------------------- */
  section {
    padding: var(--space-8) 0;
  }

  .section-header {
    margin-bottom: var(--space-7);
  }

  .section-header h2 {
    margin-bottom: var(--space-2);
  }

  .section-subtitle {
    font-size: var(--text-lg);
    color: var(--text-muted);
  }

  /* --------------------------------------------------------------------------
     Fade-in-up animation
     Cards and section headers animate in as they enter the viewport.
     Uses CSS @keyframes with an IntersectionObserver applied via <script>.
     -------------------------------------------------------------------------- */
  .fade-in-up {
    opacity: 0;
    transform: translateY(24px);
    transition:
      opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1),
      transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .fade-in-up.is-visible {
    opacity: 1;
    transform: translateY(0);
  }


  /* ==========================================================================
     Section 1: Hero — Dynamic Text Cycler
     ========================================================================== */
  .hero {
    position: relative;
    height: 60vh;
    min-height: 420px;
    max-height: 720px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    padding: 0;
    background: radial-gradient(
      ellipse at 50% 40%,
      rgba(0, 255, 136, 0.06) 0%,
      transparent 60%
    );
  }

  .hero__content {
    text-align: center;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
  }

  .hero__title {
    font-size: clamp(2.5rem, 6vw, 5rem);
    font-family: var(--font-display);
    font-weight: var(--weight-bold);
    line-height: 1.1;
    letter-spacing: -0.02em;
  }

  .hero__accent {
    color: var(--accent, #4ade80);
  }

  .hero__highlight {
    background: linear-gradient(
      135deg,
      var(--green-vivid) 0%,
      var(--fluoro-cyan) 50%,
      var(--purple-light) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* --------------------------------------------------------------------------
     Word Cycler — overflow-hidden container with sliding words
     -------------------------------------------------------------------------- */
  .hero__cycler {
    overflow: hidden;
    height: 1.3em;
    position: relative;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-family: var(--font-display);
    font-weight: var(--weight-semibold);
    line-height: 1.3;
    width: 100%;
    max-width: 600px;
  }

  .hero__cycler-track {
    display: flex;
    flex-direction: column;
    transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .hero__cycler-word {
    height: 1.3em;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: linear-gradient(
      135deg,
      var(--green-vivid) 0%,
      var(--fluoro-cyan) 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero__tagline {
    font-size: var(--text-xl);
    color: var(--text-secondary);
    max-width: 480px;
    margin: 0;
  }

  /* Reduced motion: show all words statically, no cycling */
  @media (prefers-reduced-motion: reduce) {
    .hero__cycler {
      height: auto;
      overflow: visible;
    }
    .hero__cycler-track {
      transition: none;
      gap: var(--space-1);
    }
    .hero__cycler-word {
      height: auto;
      font-size: var(--text-lg);
    }
  }

  /* Scroll-down hint arrow */
  .hero__scroll-hint {
    position: absolute;
    bottom: var(--space-6);
    left: 50%;
    transform: translateX(-50%);
  }

  .hero__scroll-arrow {
    display: block;
    width: 24px;
    height: 24px;
    border-right: 2px solid var(--text-muted);
    border-bottom: 2px solid var(--text-muted);
    transform: rotate(45deg);
    animation: scroll-bounce 2s ease-in-out infinite;
  }

  @keyframes scroll-bounce {
    0%, 100% { transform: rotate(45deg) translateY(0); opacity: 0.4; }
    50% { transform: rotate(45deg) translateY(6px); opacity: 1; }
  }


  /* ==========================================================================
     Section 2: This Week — Bento Grid
     ========================================================================== */
  .this-week {
    padding-top: var(--space-7);
  }

  .bento-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
  }

  /* Card spanning rules via :global() so they reach into the child component */
  .bento-grid > :global(:nth-child(1)) {
    /* Large topic card — spans 2 cols */
    grid-column: span 2;
    grid-row: span 2;
  }

  .bento-grid > :global(:nth-child(2)),
  .bento-grid > :global(:nth-child(3)) {
    /* Medium cards — Flashcards and Quiz */
    grid-column: span 1;
  }

  .bento-grid > :global(:nth-child(4)),
  .bento-grid > :global(:nth-child(5)) {
    /* Small cards — Streak and Teams */
    grid-column: span 1;
  }

  .bento-grid > :global(:nth-child(6)) {
    /* Progress snapshot — full width */
    grid-column: span 4;
  }

  /* Stagger the fade-in-up animation across bento cards */
  .bento-grid > :global(:nth-child(1)) { transition-delay: 0.05s; }
  .bento-grid > :global(:nth-child(2)) { transition-delay: 0.10s; }
  .bento-grid > :global(:nth-child(3)) { transition-delay: 0.15s; }
  .bento-grid > :global(:nth-child(4)) { transition-delay: 0.20s; }
  .bento-grid > :global(:nth-child(5)) { transition-delay: 0.25s; }
  .bento-grid > :global(:nth-child(6)) { transition-delay: 0.30s; }

  /* Responsive: stack on smaller viewports */
  @media (max-width: 900px) {
    .bento-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    .bento-grid > :global(:nth-child(1)) {
      grid-column: span 2;
      grid-row: span 1;
    }
    .bento-grid > :global(:nth-child(6)) {
      grid-column: span 2;
    }
  }

  @media (max-width: 560px) {
    .bento-grid {
      grid-template-columns: 1fr;
    }
    .bento-grid > :global(:nth-child(1)),
    .bento-grid > :global(:nth-child(6)) {
      grid-column: span 1;
    }
  }


  /* --------------------------------------------------------------------------
     Card Interior Styles (scoped to this page)
     -------------------------------------------------------------------------- */

  /* Description text inside the large topic card */
  .card-description {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    line-height: var(--leading-relaxed);
    max-width: 480px;
  }

  /* Metadata badges row */
  .card-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-top: auto;
  }

  /* CTA link inside cards */
  .card-cta {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-display);
    font-weight: var(--weight-semibold);
    font-size: var(--text-base);
    color: var(--accent);
    text-decoration: none;
    margin-top: var(--space-3);
    transition: gap var(--transition-fast);
  }

  .card-cta:hover {
    gap: var(--space-3);
  }

  .card-cta--sm {
    font-size: var(--text-sm);
  }

  /* Icon area placeholder in medium cards */
  .card-icon {
    margin-bottom: var(--space-2);
  }

  /* Stat text — "12 cards this week" etc. */
  .card-stat {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    font-weight: var(--weight-medium);
  }

  /* Hint text — "Keep it going!" */
  .card-hint {
    font-size: var(--text-xs);
    color: var(--text-muted);
    font-style: italic;
  }

  /* Streak number */
  .streak-number {
    font-family: var(--font-display);
    font-size: var(--text-3xl);
    font-weight: var(--weight-bold);
    color: var(--text-primary);
    line-height: 1;
  }

  .streak-unit {
    font-size: var(--text-sm);
    font-weight: var(--weight-normal);
    color: var(--text-secondary);
  }

  /* Teams reference text */
  .teams-ref {
    font-size: var(--text-xs);
    color: var(--text-secondary);
    line-height: var(--leading-relaxed);
  }

  /* --------------------------------------------------------------------------
     Badges — used throughout
     -------------------------------------------------------------------------- */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: var(--space-1) var(--space-3);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    font-family: var(--font-display);
    border-radius: var(--radius-full);
    line-height: 1;
    white-space: nowrap;
  }

  .badge--standard {
    background: var(--accent-muted);
    color: var(--accent);
  }

  .badge--credits {
    background: rgba(148, 163, 184, 0.1);
    color: var(--text-secondary);
  }

  .badge--external {
    background: rgba(255, 110, 199, 0.12);
    color: var(--fluoro-pink);
  }

  .badge--type {
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .badge--internal {
    background: rgba(0, 255, 136, 0.1);
    color: var(--green-vivid);
  }

  .badge--external {
    background: rgba(255, 110, 199, 0.1);
    color: var(--fluoro-pink);
  }


  /* --------------------------------------------------------------------------
     Progress Bars (inside the Progress Snapshot card)
     -------------------------------------------------------------------------- */
  .progress-bars {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .progress-row {
    display: grid;
    grid-template-columns: 180px 1fr 40px;
    align-items: center;
    gap: var(--space-3);
  }

  @media (max-width: 600px) {
    .progress-row {
      grid-template-columns: 1fr;
      gap: var(--space-1);
    }
  }

  .progress-label {
    display: flex;
    gap: var(--space-2);
    font-size: var(--text-xs);
  }

  .progress-code {
    font-family: var(--font-mono);
    font-weight: var(--weight-semibold);
    white-space: nowrap;
  }

  .progress-name {
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .progress-track {
    height: 6px;
    background: var(--surface-3);
    border-radius: var(--radius-full);
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: var(--radius-full);
    transition: width 0.8s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .progress-pct {
    font-size: var(--text-xs);
    color: var(--text-muted);
    font-family: var(--font-mono);
    text-align: right;
  }


  /* ==========================================================================
     Section 3: Course Overview — Standards Grid
     ========================================================================== */
  .course-overview {
    background: var(--surface-0);
  }

  .standards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-4);
  }

  .standard-card {
    background: var(--surface-1);
    border: 1px solid var(--border-subtle);
    border-left: 4px solid var(--std-colour);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    text-decoration: none;
    color: inherit;
    transition:
      transform var(--transition-base),
      box-shadow var(--transition-base),
      border-color var(--transition-base);
  }

  .standard-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--std-colour);
  }

  /* Stagger standard card fade-in */
  .standards-grid .standard-card:nth-child(1) { transition-delay: 0.05s; }
  .standards-grid .standard-card:nth-child(2) { transition-delay: 0.10s; }
  .standards-grid .standard-card:nth-child(3) { transition-delay: 0.15s; }
  .standards-grid .standard-card:nth-child(4) { transition-delay: 0.20s; }
  .standards-grid .standard-card:nth-child(5) { transition-delay: 0.25s; }

  .standard-card__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-2);
    flex-wrap: wrap;
  }

  .standard-card__code {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    color: var(--std-colour);
  }

  .standard-card__badges {
    display: flex;
    gap: var(--space-2);
  }

  .standard-card__title {
    font-size: var(--text-xl);
    font-weight: var(--weight-bold);
    color: var(--text-primary);
  }

  .standard-card__desc {
    font-size: var(--text-sm);
    color: var(--text-muted);
    line-height: var(--leading-relaxed);
  }


  /* ==========================================================================
     Section 4: Browse Weeks
     ========================================================================== */
  .browse-weeks {
    background: var(--surface-0);
  }

  .weeks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(52px, 1fr));
    gap: var(--space-2);
    max-width: 720px;
  }

  .week-chip {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 52px;
    font-family: var(--font-display);
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-subtle);
    transition:
      transform var(--transition-fast),
      background var(--transition-fast),
      border-color var(--transition-fast),
      box-shadow var(--transition-fast);
    text-decoration: none;
  }

  /* Active (content available) */
  .week-chip--active {
    background: var(--accent-muted);
    color: var(--accent);
    border-color: var(--accent);
  }

  .week-chip--active:hover {
    background: var(--accent);
    color: var(--surface-0);
    transform: translateY(-2px);
    box-shadow: var(--shadow-glow);
  }

  /* Disabled (no content yet) */
  .week-chip--disabled {
    background: var(--surface-1);
    color: var(--text-muted);
    cursor: default;
    opacity: 0.45;
  }
</style>


<!-- ==========================================================================
     Scripts — word cycler + IntersectionObserver fade-in
     ========================================================================== -->
<script>
  /* --------------------------------------------------------------------------
     Word Cycler — rotates through NCEA standard names in the hero
     Pauses for users who prefer reduced motion.
     -------------------------------------------------------------------------- */
  const track = document.querySelector('.hero__cycler-track');
  const words = document.querySelectorAll('.hero__cycler-word');
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  if (track && words.length > 0 && !prefersReducedMotion) {
    let currentIndex = 0;
    const totalWords = words.length;
    const intervalMs = 3000; // 3 seconds per word

    setInterval(() => {
      currentIndex = (currentIndex + 1) % totalWords;
      /* Slide the track up by one word height (each word is 1.3em) */
      track.style.transform = `translateY(-${currentIndex * 1.3}em)`;
    }, intervalMs);
  }

  /* --------------------------------------------------------------------------
     IntersectionObserver — triggers .fade-in-up animations on viewport entry
     -------------------------------------------------------------------------- */
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          observer.unobserve(entry.target); // animate once only
        }
      });
    },
    { threshold: 0.08, rootMargin: '0px 0px -40px 0px' }
  );

  document.querySelectorAll('.fade-in-up').forEach((el) => observer.observe(el));
</script>
